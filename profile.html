<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профиль</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="css/index.css">
    <script src="js/theme.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/just-validate@latest/dist/just-validate.production.min.js"></script>
    <script src="js/basic-ui.min.js"></script>
</head>

<body>
    <header class="header">
        <input id="burger-checkbox" type="checkbox">
        <label class="burger" for="burger-checkbox">
            <span class="burger-line"></span>
            <span class="burger-line"></span>
            <span class="burger-line"></span>
        </label>
        <aside id="header-menu">
            <img class="menu-logo" src="icons/logo.svg" alt="">
            <nav class="menu">
                <ul class="menu-list">
                    <li class="menu-item">
                        <a class="menu-link" href="index.html"><img class="menu-icon purple-gradient"
                                src="icons/home.svg" alt=""><span class="menu-name">Home</span></a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link" href="pets.html"><img class="menu-icon orange-gradient"
                                src="icons/pets.svg" alt=""><span class="menu-name">Pets</span></a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link" href="blog.html"><img class="menu-icon yellow-gradient"
                                src="icons/blog.svg" alt=""><span class="menu-name">Blog</span></a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link" href=""><img class="menu-icon pink-gradient" src="icons/chat.svg"
                                alt=""><span class="menu-name">Chat</span></a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link active" href="profile.html"><img class="menu-icon green-gradient"
                                src="icons/person.svg" alt=""><span class="menu-name">Profile</span></a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link" href=""><img class="menu-icon blue" src="icons/logout.svg" alt=""><span
                                class="menu-name">Logout</span></a>
                    </li>
                </ul>
            </nav>
        </aside>
        <h1 class="header-title">Home</h1>
        <input id="switcher-checkbox" type="checkbox">
        <label class="header-switcher" for="switcher-checkbox">
            <span class="switcher"></span>
        </label>
        <div class="header-push"></div>
        <div class="profile-image" style="background-image: url('images/profile.jpg')"></div>
    </header>
    <main>
        <div class="main">
            <div class="profile-buttons">
                <button class="profile-button profile-button-active box" id="account">Аккаунт</button>
                <button class="profile-button box" id="settings">Настройки</button>
                <button class="profile-button box" id="pets">Ваши питомцы</button>
            </div>
            <form class="profile-form box" id="account-form">
                <fieldset class="account-section information">
                    <h2 class="profile-title">Информация</h2>
                    <div class="account-image"></div>
                    <div class="account-form" action="">
                        <label class="input-text-label">
                            <span class="input-text-title">Имя</span>
                            <input class="input-text" id="account-name" type="text" name="name" placeholder="John Doe">
                        </label>
                        <label class="input-text-label">
                            <span class="input-text-title">Дата рождения</span>
                            <input class="input-text" id="account-date" type="text" data-mask-options='{ "mask": "date" }'>
                        </label>
                        <label class="input-text-label">
                            <span class="input-text-title">Статус</span>
                            <input class="input-text" id="account-status" type="text" value="Буба не работает!">
                        </label>
                        <label class="input-text-label">
                            <span class="input-text-title">Местоположение</span>
                            <input class="input-text" id="account-location" type="text" value="Germany, Hamburg">
                        </label>
                    </div>
                </fieldset>
                <fieldset class="account-section security">
                    <h2 class="profile-title">Безопасность</h2>
                    <div class="account-form" action="">
                        <label class="input-text-label">
                            <input class="input-text" id="current-password" type="password"
                                placeholder="Текущий пароль">
                        </label>
                        <label class="input-text-label">
                            <input class="input-text" id="new-password" type="password" placeholder="Новый пароль">
                        </label>
                    </div>
                </fieldset>
                <button class="button small">Сохранить</button>
            </form>
            <form class="profile-form box hide" id="settings-form">
                <h2 class="profile-title">Настройки</h2>
                <fieldset class="settings-section">
                    <h3 class="profile-subtitle">Аккаунт</h3>
                    <div class="settings-form" action="">
                        <label class="settings-label">
                            <input class="input-checkbox" type="checkbox">
                            <span class="checkbox"></span>
                            Включить уведомления
                        </label>
                        <label class="settings-label">
                            <input class="input-checkbox" type="checkbox">
                            <span class="checkbox"></span>
                            Получать новостную рассылку
                        </label>
                    </div>
                </fieldset>
                <fieldset class="settings-section">
                    <h3 class="profile-subtitle">Приложение</h3>
                    <div class="settings-form" action="">
                        <label class="settings-label">
                            <input class="input-checkbox" type="checkbox">
                            <span class="checkbox"></span>
                            Включить ночной режим
                        </label>
                        <label class="settings-label">
                            <input class="input-checkbox" type="checkbox">
                            <span class="checkbox"></span>
                            Получать уведомления со звуком
                        </label>
                        <label class="settings-label">
                            <input class="input-checkbox" type="checkbox">
                            <span class="checkbox"></span>
                            Браузерные уведомления
                        </label>
                    </div>
                </fieldset>
            </form>
            <form class="profile-form box hide" id="pets-form">
                <div class="steps">
                    <span class="step">1</span>
                    <span class="step-separator"></span>
                    <span class="step">2</span>
                    <span class="step-separator"></span>
                    <span class="step">3</span>
                    <span class="step-separator"></span>
                    <span class="step">4</span>
                </div>
                <div class="profile-separator"></div>
                <div class="tab hide">
                    <p class="pets-title">Давайте узнаем немного о вашем питомце?</p>
                    <fieldset class="pets-fieldset-main">
                        <label class="input-text-label">
                            <input class="input-text" type="text" placeholder="Имя питомца" required>
                        </label>
                        <label class="gender-label">
                            <input id="gender-checkbox" type="checkbox">
                            <span class="gender-switcher"></span>
                        </label>
                        <label class="input-text-label">
                            <span class="input-text-title">Опишите вашего питомца</span>
                            <input class="input-text" type="text">
                        </label>
                        <fieldset class="pets-fieldset">
                            <span>С какой целью выкладываете питомца?</span>
                            <div class="pets-radio-container">
                                <label class="pets-radio">
                                    <input class="input-radio" type="radio" name="reason" checked>
                                    <span class="radio"></span>
                                    Просто показываю
                                </label>
                                <label class="pets-radio">
                                    <input class="input-radio" type="radio" name="reason">
                                    <span class="radio"></span>
                                    Отдаю в добрые руки
                                </label>
                                <label class="pets-radio">
                                    <input class="input-radio" type="radio" name="reason">
                                    <span class="radio"></span>
                                    Торгую микрочелами
                                </label>
                            </div>
                        </fieldset>
                    </fieldset>
                </div>
                <div class="tab hide">
                    <div class="pets-titles">
                        <span class="pets-title">Загрузите пару изображений питомца</span>
                        <span class="pets-subtitle">Вы можете загрузить не более 15 изображений</span>
                    </div>
                    <label class="pets-drop">
                        <input class="pets-drop-input" type="file" accept="image/*" multiple>
                        <p><span>Выберете файлы</span> или перетащите их сюда</p>
                    </label>
                </div>
                <div class="tab hide">
                    <div class="pets-titles">
                        <span class="pets-title">Давайте узнаем больше о вашем питомце</span>
                    </div>
                    <span>Ваш питомец...</span>
                    <div class="pets-wrap">
                        <div class="animal-buttons">
                            <label class="animal-button" id="cats">
                                <input type="radio" name="animal" checked>
                                <span>Кот</span>
                            </label>
                            <label class="animal-button" id="dogs">
                                <input type="radio" name="animal">
                                <span>Собака</span>
                            </label>
                            <label class="animal-button" id="birds">
                                <input type="radio" name="animal">
                                <span>Птица</span>
                            </label>
                            <label class="animal-button" id="hares">
                                <input type="radio" name="animal">
                                <span>Заяц</span>
                            </label>
                            <label class="animal-button" id="mice">
                                <input type="radio" name="animal">
                                <span>Мышь</span>
                            </label>
                            <label class="animal-button" id="others">
                                <input type="radio" name="animal">
                                <span>Другой</span>
                            </label>
                        </div>
                        <div class="pets-input-container">
                            <div class="select">
                                <div class="select__header">
                                    <span class="select__current">Порода</span>
                                </div>
                                <div class="select__body">
                                    <div class="select__item">Макрочел</div>
                                    <div class="select__item">Гигачел</div>
                                    <div class="select__item">Микрочел</div>
                                    <div class="select__item">Суперчел</div>
                                    <div class="select__item">Мегачел</div>
                                </div>
                            </div>
                            <label class="input-text-label">
                                <input class="input-text" type="date">
                            </label>
                            <label class="input-text-label">
                                <input class="input-text" type="number" placeholder="Вес, кг">
                            </label>
                            <div class="select">
                                <div class="select__header">
                                    <span class="select__current">Страна</span>
                                </div>
                                <div class="select__body">
                                    <div class="select__item">Германия</div>
                                    <div class="select__item">Россия</div>
                                </div>
                            </div>
                            <div class="select">
                                <div class="select__header">
                                    <span class="select__current">Город</span>
                                </div>
                                <div class="select__body">
                                    <div class="select__item">Пермь</div>
                                    <div class="select__item">Москва</div>
                                </div>
                            </div>
                            <div class="select">
                                <div class="select__header">
                                    <span class="select__current">Город</span>
                                </div>
                                <div class="select__body">
                                    <div class="select__item">Пермь</div>
                                    <div class="select__item">Москва</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab hide">
                    <img class="img-succes" src="images/succes.png" alt="">
                    <span class="succes-title">Вы успешно добавили питомца</span>
                </div>
                <div class="pets-buttons">
                    <button class="button small" id="prevBtn" type="button" onclick="nextPrev(-1)">Назад</button>
                    <button class="button small" id="nextBtn" type="button" onclick="nextPrev(1)">Дальше</button>
                </div>
            </form>
        </div>
    </main>

    <script>

        function showOption(button, option) {
            let items = document.querySelectorAll('.profile-form');
            let activeButton = document.querySelector('.profile-button-active');

            if (button.classList.contains('profile-button-active') == false) {
                activeButton.classList.remove('profile-button-active');
                button.classList.add('profile-button-active');
                for (let item of items) {
                    item.classList.add('hide');
                }
                option.classList.remove('hide');
            }
        }

        settings.addEventListener("click", function () {
            let option = document.querySelector('#settings-form');
            showOption(this, option);
        })

        pets.addEventListener("click", function () {
            let option = document.querySelector('#pets-form');
            showOption(this, option);
        })

        account.addEventListener("click", function () {
            let option = document.querySelector('#account-form');
            showOption(this, option);
        })
    </script>

    <script>
        let select = function () {
            let selectHeader = document.querySelectorAll('.select__header');
            let selectItem = document.querySelectorAll('.select__item');


            selectHeader.forEach(item => {
                item.addEventListener('click', selectToggle)
            });

            selectItem.forEach(item => {
                item.addEventListener('click', selectChoose)
            });

            function selectToggle() {
                if (this.parentElement.classList.contains('is-active')) {
                    document.querySelectorAll('.is-active').forEach(item => {
                        item.classList.remove('is-active');
                    });
                } else {
                    document.querySelectorAll('.is-active').forEach(item => {
                        item.classList.remove('is-active');
                    });
                    this.parentElement.classList.add('is-active');
                }
            }

            function selectChoose() {
                let text = this.innerText,
                    select = this.closest('.select'),
                    currentText = select.querySelector('.select__current');

                currentText.innerText = text;
                select.classList.remove('is-active');
                select.querySelectorAll('.select__item').forEach(item => {
                    item.classList.remove('active');
                });
                this.classList.add('active');

            }

        };

        document.addEventListener('click', (event) => {
            let div = document.querySelector('.is-active');
            let withinBoundaries = event.composedPath().includes(div);

            if (div && !withinBoundaries) {
                div.classList.remove('is-active');
            }
        })


        select();
    </script>

    <script>
        let currentTab = 0;
        let tabs = document.querySelectorAll('.tab');
        let steps = document.querySelectorAll('.step');
        showTab(currentTab);

        function showTab(n) {
            let prev = document.querySelector('#prevBtn');
            let next = document.querySelector('#nextBtn');

            tabs[n].classList.remove('hide');

            if (n == 0 || n == (tabs.length - 1)) {
                prev.classList.add('hide');
            } else {
                prev.classList.remove('hide');
            }

            if (n == (tabs.length - 1)) {
                next.textContent = "Завершить";
            } else {
                next.textContent = "Дальше";
            }
            fixStepIndicator(n);

        }

        function nextPrev(n) {
            /*if (n == 1 && !validateForm()) {
                return false;
            }*/

            if (n == -1) {
                steps[currentTab].classList.remove('active');
            }

            tabs[currentTab].classList.add('hide');

            currentTab = currentTab + n;
            console.log(currentTab);

            if (currentTab >= tabs.length) {
                document.getElementById("regForm").submit();
                return false;
            }

            showTab(currentTab);
        }

        function validateForm() {
            let valid = true;
            let formFields = tabs[currentTab].getElementsByTagName("input");

            if (formFields) {
                for (let formField of formFields) {
                    if (formField.value == "") {
                        formField.classList.add("invalid");
                        valid = false;
                    }
                }
            }

            return valid;
        }

        function fixStepIndicator(n) {

            steps[n].classList.add('active');
        }
    </script>

    <script>
        const validator = new JustValidate('#account-form');

        validator
            .addField('#account-name', [
                {
                    rule: 'required',
                },
                {
                    rule: 'minLength',
                    value: 3,
                },
                {
                    rule: 'maxLength',
                    value: 15,
                },
            ])
            .addField('#current-password', [
                {
                    rule: 'password',
                },
            ])


    </script>
    <script>
        BasicMask.init(document.querySelector('#account-date'));
        BasicMask.updateOptions('#account-date', {
            mask: Date,
    pattern: 'd/`m/`Y',
    format: function (date) {
      var day = date.getDate();
      var month = date.getMonth() + 1;
      var year = date.getFullYear();
  
      if (day < 10) day = "0" + day;
      if (month < 10) month = "0" + month;
  
      return [day, month, year].join('/');
    },
    // define str -> date convertion
    parse: function (str) {
      var yearMonthDay = str.split('/');
      return new Date(yearMonthDay[2], yearMonthDay[1] - 1, yearMonthDay[0]);
    },
    min: new Date(1980, 0, 1),
    max: new Date(2020, 0, 1),
    lazy: false,
    });
    </script>
</body>

</html>