<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Новости</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/blog.css">
    <script src="js/textarea.js"></script>
    <script src="js/theme.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
</head>

<body>
    <header class="header">
        <input id="burger-checkbox" type="checkbox">
        <label class="burger" for="burger-checkbox">
            <span class="burger-line"></span>
            <span class="burger-line"></span>
            <span class="burger-line"></span>
        </label>
        <aside id="header-menu">
            <img class="menu-logo" src="icons/logo.svg" alt="">
            <nav class="menu">
                <ul class="menu-list">
                    <li class="menu-item">
                        <a class="menu-link" href="index.html">
                            <img class="menu-icon purple-gradient" src="icons/home.svg" alt="">
                            <span class="menu-name">Home</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link" href="pets.html">
                            <img class="menu-icon orange-gradient" src="icons/pets.svg" alt="">
                            <span class="menu-name">Pets</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link active" href="blog.html">
                            <img class="menu-icon yellow-gradient" src="icons/blog.svg" alt="">
                            <span class="menu-name">Blog</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link" href="">
                            <img class="menu-icon pink-gradient" src="icons/chat.svg" alt="">
                            <span class="menu-name">Chat</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link" href="profile.html">
                            <img class="menu-icon green-gradient" src="icons/person.svg" alt="">
                            <span class="menu-name">Profile</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link" href="">
                            <img class="menu-icon blue" src="icons/logout.svg" alt="">
                            <span class="menu-name">Logout</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>
        <h1 class="header-title">Новости</h1>
        <input id="switcher-checkbox" type="checkbox">
        <label class="header-switcher" for="switcher-checkbox">
            <span class="switcher"></span>
        </label>
        <div class="header-push"></div>
        <a class="profile-image" href="profile.html" style="background-image: url('images/profile.jpg')"></a>
    </header>
    <main>
        <div class="main">
            <div class="chat-comment-new box">
                <div class="profile-image">JD</div>
                <form class="chat-text">
                    <textarea class="chat-textarea" rows="1" name="" id="textarea"
                        placeholder="Что у вас нового?"></textarea>
                </form>
                <div class="attachments" id="attachments">
                    <input type="file" id="attachments-checkbox" class="attach-checkbox" accept="image/*" multiple>
                    <label for="attachments-checkbox" class="attach"></label>
                    <!-- <div class="attachment attachment-new">+</div> -->
                </div>
            </div>
            <div class="chat-wrapper" id="chat-wrapper">
                <div class="chat-item-sizer"></div>
                <div class="chat-gutter"></div>
                <div class="chat-item box">
                    <div class="chat-info">
                        <div class="profile-image pink-gradient">Y</div>
                        <div class="chat-wrap">
                            <div class="chat-wrap-line">
                                <span class="chat-name">Ynfan</span>
                                <time class="chat-time" datetime="2021-10-05T17:20">22 сентября</time>
                            </div>
                            <div class="chat-wrap-line">
                                <span class="chat-caption">Пельмень с мясом.</span>
                                <time class="chat-time" datetime="2021-10-05T17:20">17:20</time>
                            </div>
                        </div>
                    </div>
                    <article class="chat-message">
                        <p>Мой кот постоянно ходит по краю бассейна, как будто ждет, что оттуда
                            выпрыгнет
                            утка.</p>
                        <p>Я его уже не уговариваю.</p>
                        <p>Он так сидит уже несколько лет.</p>
                    </article>
                    <div class="chat-attachments">
                        <div><img src="images/gallery1.jpg" alt=""></div>
                        <div><img src="images/gallery2.jpg" alt=""></div>
                        <div><img src="images/gallery3.jpg" alt=""></div>
                    </div>
                    <div class="chat-counters">
                        <div class="chat-counters-row">
                            <div class="like-icon pressed"></div>
                            <p>20<span class="chat-counter-name"> лайков</span></p>
                        </div>
                        <div class="chat-counters-row">
                            <div class="comment-icon"></div>
                            <p>47<span class="chat-counter-name"> комментариев</span></p>
                        </div>
                    </div>
                    <div class="chat-separator"></div>
                    <div class="chat-comment">
                        <div class="profile-image">JD</div>
                        <div class="chat-textarea-test" contenteditable="true" placeholder="Написать комментарий..."></div>
                    </div>
                </div>
                <div class="chat-item box">
                    <div class="chat-info">
                        <div class="profile-image orange-gradient">R</div>
                        <div class="chat-wrap">
                            <div class="chat-wrap-line">
                                <span class="chat-name">Rat</span>
                                <time class="chat-time" datetime="2021-10-05T17:20">17 марта</time>
                            </div>
                            <div class="chat-wrap-line">
                                <span class="chat-caption">Пес – это тоже я.</span>
                                <time class="chat-time" datetime="2021-10-05T17:20">17:20</time>
                            </div>
                        </div>
                    </div>
                    <article class="chat-message">
                        <p>Жил да был как-то хомяк, он любил играть с прищепками и был одинок, и решил создать семью,
                            которая состояла из хомячихи и двух хомячат.
                            И вот однажды в доме появился еще один хомяк...</p>
                    </article>
                    <div class="chat-counters">
                        <div class="chat-counters-row">
                            <div class="like-icon"></div>
                        </div>
                        <div class="chat-counters-row">
                            <div class="comment-icon"></div>
                        </div>
                    </div>
                    <div class="chat-separator"></div>
                    <div class="chat-comment">
                        <div class="profile-image">JD</div>
                        <div class="chat-textarea-test" contenteditable="true" placeholder="Написать комментарий..."></div>
                    </div>
                </div>
                <div class="chat-item box">
                    <div class="chat-info">
                        <div class="profile-image orange-gradient">R</div>
                        <div class="chat-wrap">
                            <div class="chat-wrap-line">
                                <span class="chat-name">Rat</span>
                                <time class="chat-time" datetime="2021-10-05T17:20">17 марта</time>
                            </div>
                            <div class="chat-wrap-line">
                                <span class="chat-caption">Пес – это тоже я.</span>
                                <time class="chat-time" datetime="2021-10-05T17:20">17:20</time>
                            </div>
                        </div>
                    </div>
                    <article class="chat-message">
                        <p>Жил да был как-то хомяк, он любил играть с прищепками и был одинок, и решил создать семью,
                            которая состояла из хомячихи и двух хомячат.
                            И вот однажды в доме появился еще один хомяк...</p>
                    </article>
                    <div class="chat-counters">
                        <div class="chat-counters-row">
                            <div class="like-icon"></div>
                        </div>
                        <div class="chat-counters-row">
                            <div class="comment-icon"></div>
                        </div>
                    </div>
                    <div class="chat-separator"></div>
                    <div class="chat-comment">
                        <div class="profile-image">JD</div>
                        <div class="chat-textarea-test" contenteditable="true" placeholder="Написать комментарий..."></div>
                    </div>
                </div>
                <div class="chat-item box">
                    <div class="chat-info">
                        <div class="profile-image orange-gradient">R</div>
                        <div class="chat-wrap">
                            <div class="chat-wrap-line">
                                <span class="chat-name">Rat</span>
                                <time class="chat-time" datetime="2021-10-05T17:20">17 марта</time>
                            </div>
                            <div class="chat-wrap-line">
                                <span class="chat-caption">Пес – это тоже я.</span>
                                <time class="chat-time" datetime="2021-10-05T17:20">17:20</time>
                            </div>
                        </div>
                    </div>
                    <article class="chat-message">
                        <p>Жил да был как-то хомяк, он любил играть с прищепками и был одинок, и решил создать семью,
                            которая состояла из хомячихи и двух хомячат.
                            И вот однажды в доме появился еще один хомяк...</p>
                    </article>
                    <div class="chat-counters">
                        <div class="chat-counters-row">
                            <div class="like-icon"></div>
                        </div>
                        <div class="chat-counters-row">
                            <div class="comment-icon"></div>
                        </div>
                    </div>
                    <div class="chat-separator"></div>
                    <div class="chat-comment">
                        <div class="profile-image">JD</div>
                        <div class="chat-textarea-test" contenteditable="true" placeholder="Написать комментарий..."></div>
                    </div>
                </div>
                <div class="chat-item box">
                    <div class="chat-info">
                        <div class="profile-image orange-gradient">R</div>
                        <div class="chat-wrap">
                            <div class="chat-wrap-line">
                                <span class="chat-name">Rat</span>
                                <time class="chat-time" datetime="2021-10-05T17:20">17 марта</time>
                            </div>
                            <div class="chat-wrap-line">
                                <span class="chat-caption">Пес – это тоже я.</span>
                                <time class="chat-time" datetime="2021-10-05T17:20">17:20</time>
                            </div>
                        </div>
                    </div>
                    <article class="chat-message">
                        <p>Жил да был как-то хомяк, он любил играть с прищепками и был одинок, и решил создать семью,
                            которая состояла из хомячихи и двух хомячат.
                            И вот однажды в доме появился еще один хомяк...</p>
                    </article>
                    <div class="chat-counters">
                        <div class="chat-counters-row">
                            <div class="like-icon"></div>
                        </div>
                        <div class="chat-counters-row">
                            <div class="comment-icon"></div>
                        </div>
                    </div>
                    <div class="chat-separator"></div>
                    <div class="chat-comment">
                        <div class="profile-image">JD</div>
                        <div class="chat-textarea-test" contenteditable="true" placeholder="Написать комментарий..."></div>
                    </div>
                </div>
                <div class="chat-item box">
                    <div class="chat-info">
                        <div class="profile-image orange-gradient">R</div>
                        <div class="chat-wrap">
                            <div class="chat-wrap-line">
                                <span class="chat-name">Rat</span>
                                <time class="chat-time" datetime="2021-10-05T17:20">17 марта</time>
                            </div>
                            <div class="chat-wrap-line">
                                <span class="chat-caption">Пес – это тоже я.</span>
                                <time class="chat-time" datetime="2021-10-05T17:20">17:20</time>
                            </div>
                        </div>
                    </div>
                    <article class="chat-message">
                        <p>Жил да был как-то хомяк, он любил играть с прищепками и был одинок, и решил создать семью,
                            которая состояла из хомячихи и двух хомячат.
                            И вот однажды в доме появился еще один хомяк...</p>
                    </article>
                    <div class="chat-counters">
                        <div class="chat-counters-row">
                            <div class="like-icon"></div>
                        </div>
                        <div class="chat-counters-row">
                            <div class="comment-icon"></div>
                        </div>
                    </div>
                    <div class="chat-separator"></div>
                    <div class="chat-comment">
                        <div class="profile-image">JD</div>
                        <div class="chat-textarea-test" contenteditable="true" placeholder="Написать комментарий..."></div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>
        let attach = document.querySelector('label[for="attachments-checkbox"]');
        let fileInput = document.querySelector("#attachments-checkbox");
        let dropZone = document.querySelector('label[for="attachments-checkbox"]');
        let notLoaded = true;

        function inputImage (files) {
            for (let file of files) {
                if (file && file.type.startsWith("image/")) {
                    displayImage(file);
                    
                } else {
                    alert('Можно загружать только изображения.');
                }
            }

            if (notLoaded == true) {
                attach.className = 'attachment attachment-new';
                attach.textContent = '+';
                notLoaded = false;
            }
        };

        function displayImage (file) {
            let div = document.createElement('div');
            let img = document.createElement('img');
            let imageURL = URL.createObjectURL(file);

            attach.before(div);
            div.classList.add('attachment');
            div.append(img);
            img.src = imageURL;

            img.onload = () => URL.revokeObjectURL(imageURL);
        }

        dropZone.addEventListener('dragover', event => {
            event.stopPropagation();
            event.preventDefault();
            event.dataTransfer.dropEffect = 'copy';
            console.log('yes');
        });

        dropZone.addEventListener('drop', event => {
            event.preventDefault();
            let files = event.dataTransfer.files;
            inputImage (files);
        });

        fileInput.addEventListener('change', event => {
            let files = fileInput.files;
            inputImage (files);
        });

    </script>

    <script>
        var elem = document.querySelector('.chat-wrapper');
        var msnry = new Masonry(elem, {
            itemSelector: '.chat-item',
            horizontalOrder: true,
            columnWidth: '.chat-item-sizer',
            gutter: '.chat-gutter',
            percentPosition: true,
        });

        let mutantor = document.querySelector('#chat-wrapper');

        let observer = new MutationObserver(mutations => {
            mutations.forEach(mutation => {
                if (mutation.type === 'childList' || mutation.type === 'characterData') {
                    msnry.layout();
                }
            });
        });

        observer.observe(mutantor, {
            childList: true,
            characterData: true,
            subtree: true
        });

        window.addEventListener("load", () => msnry.layout());

    </script>

</body>

</html>